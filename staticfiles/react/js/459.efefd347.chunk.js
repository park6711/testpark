"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[459],{4459:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ae});var s=r(3986),n=r(9379),o=r(5043),a=r(8964),l=r(1023),i=r(2524),c=r(487),d=r(6569),h=r(839),u=r(7419),y=r(1645),x=r(6051),p=r(5492),j=r(5531),A=r(6612),g=r(5512),f=r(8354),m=r(6840),w=r(5534),v=r(5337),S=r(6091),b=r(119),k=r(8818),C=r(6237),T=r(2058),z=r(5808),_=r(6399),O=r(494),E=r(7490),I=r(2635),P=r(647),L=r(3722),D=r(7534),F=r(1402),R=r(2156),N=r(1210),B=r(3117),U=r(9025),M=r(617),H=r(1966),Y=r(9330),q=r(579);var J=r(9682),K=r(9472),Q=r(4522);const{TextArea:W}=i.A,{Text:G,Title:V}=l.A,X=e=>{let{isOpen:t,onClose:r,orderId:s,orderName:n,memos:a=[],onAddMemo:l}=e;const[i,c]=(0,o.useState)(""),[h,u]=(0,o.useState)(!1);return(0,q.jsx)(J.A,{title:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(B.A,{}),(0,q.jsxs)("span",{children:["\uba54\ubaa8 \uad00\ub9ac - ",n]})]}),open:t,onCancel:r,width:700,footer:null,destroyOnClose:!0,children:(0,q.jsxs)(x.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,q.jsxs)("div",{style:{background:"#f5f5f5",padding:16,borderRadius:8},children:[(0,q.jsx)(V,{level:5,children:"\uc0c8 \uba54\ubaa8 \uc791\uc131"}),(0,q.jsx)(W,{value:i,onChange:e=>c(e.target.value),placeholder:"\uba54\ubaa8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694...",rows:4,disabled:h,style:{marginBottom:12}}),(0,q.jsx)(p.Ay,{type:"primary",onClick:async()=>{if(i.trim()){u(!0);try{const e=await l(i);e.success?(d.Ay.success("\uba54\ubaa8\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),c("")):d.Ay.error(e.error||"\uba54\ubaa8 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){d.Ay.error("\uba54\ubaa8 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{u(!1)}}else d.Ay.warning("\uba54\ubaa8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},loading:h,disabled:!i.trim(),children:"\uba54\ubaa8 \ucd94\uac00"})]}),(0,q.jsxs)("div",{children:[(0,q.jsxs)(V,{level:5,children:["\uba54\ubaa8 \ubaa9\ub85d (",a.length,"\uac1c)"]}),0===a.length?(0,q.jsx)(K.A,{description:"\ub4f1\ub85d\ub41c \uba54\ubaa8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,q.jsx)(Q.A,{dataSource:a,renderItem:e=>{return(0,q.jsx)(Q.A.Item,{style:{background:"white",marginBottom:8,padding:16,borderRadius:8,border:"1px solid #f0f0f0"},children:(0,q.jsx)(Q.A.Item.Meta,{title:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(L.A,{}),(0,q.jsx)(G,{strong:!0,children:e.author}),(0,q.jsxs)(G,{type:"secondary",style:{fontSize:12},children:[(0,q.jsx)(b.A,{style:{marginRight:4}}),(t=e.created_at,new Date(t).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))]})]}),description:(0,q.jsx)(G,{style:{whiteSpace:"pre-wrap"},children:e.content})})});var t},style:{maxHeight:400,overflow:"auto"}})]})]})})};var Z=r(2261),$=r(6603),ee=r(7407);const te=[{value:"\uc811\uc218\uc644\ub8cc",label:"\uc811\uc218\uc644\ub8cc",color:"#4CAF50"},{value:"\uc5c5\uccb4\uc804\ub2ec",label:"\uc5c5\uccb4\uc804\ub2ec",color:"#2196F3"},{value:"\ud604\uc7a5\ubbf8\ud305",label:"\ud604\uc7a5\ubbf8\ud305",color:"#FF9800"},{value:"\uacac\uc801\uc804\ub2ec",label:"\uacac\uc801\uc804\ub2ec",color:"#9C27B0"},{value:"\uacc4\uc57d\uc644\ub8cc",label:"\uacc4\uc57d\uc644\ub8cc",color:"#00BCD4"},{value:"\uc2dc\uacf5\uc911",label:"\uc2dc\uacf5\uc911",color:"#FFC107"},{value:"\uc644\ub8cc",label:"\uc644\ub8cc",color:"#8BC34A"},{value:"\ucde8\uc18c",label:"\ucde8\uc18c",color:"#F44336"},{value:"\ubcf4\ub958",label:"\ubcf4\ub958",color:"#9E9E9E"}],re=["\uc11c\uc6b8","\uacbd\uae30","\uc778\ucc9c","\ub300\uc804","\ub300\uad6c","\ubd80\uc0b0","\uad11\uc8fc","\uc6b8\uc0b0","\uc138\uc885","\uac15\uc6d0","\ucda9\ubd81","\ucda9\ub0a8","\uc804\ubd81","\uc804\ub0a8","\uacbd\ubd81","\uacbd\ub0a8","\uc81c\uc8fc"],{TextArea:se}=i.A,{Text:ne,Title:oe}=l.A,ae=e=>{var t,r,s;let{isOpen:n,onClose:a,orderId:l,orderName:i,currentStatus:c,onStatusUpdate:h}=e;const[u,y]=(0,o.useState)(c),[j,A]=(0,o.useState)(""),[g,f]=(0,o.useState)(!1),m=()=>{y(c),A(""),a()};return(0,q.jsx)(J.A,{title:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(ee.A,{}),(0,q.jsxs)("span",{children:["\uc0c1\ud0dc \ubcc0\uacbd - ",i]})]}),open:n,onCancel:m,width:600,footer:[(0,q.jsx)(p.Ay,{onClick:m,disabled:g,children:"\ucde8\uc18c"},"cancel"),(0,q.jsx)(p.Ay,{type:"primary",onClick:async()=>{if(u)if(u!==c){f(!0);try{const e=await h(u,j);e.success?(d.Ay.success("\uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),a()):d.Ay.error(e.error||"\uc0c1\ud0dc \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){d.Ay.error("\uc0c1\ud0dc \ubcc0\uacbd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{f(!1)}}else d.Ay.info("\ud604\uc7ac \uc0c1\ud0dc\uc640 \ub3d9\uc77c\ud569\ub2c8\ub2e4.");else d.Ay.warning("\uc0c1\ud0dc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},loading:g,disabled:u===c,icon:(0,q.jsx)(C.A,{}),children:"\uc0c1\ud0dc \ubcc0\uacbd"},"submit")],destroyOnClose:!0,children:(0,q.jsxs)(x.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,q.jsx)(Z.A,{message:"\ud604\uc7ac \uc0c1\ud0dc",description:(0,q.jsx)(_.A,{color:null===(t=te.find(e=>e.value===c))||void 0===t?void 0:t.color,style:{fontSize:14,padding:"4px 12px"},children:c}),type:"info",showIcon:!0}),(0,q.jsxs)("div",{children:[(0,q.jsx)(oe,{level:5,style:{marginBottom:16},children:"\ubcc0\uacbd\ud560 \uc0c1\ud0dc"}),(0,q.jsx)($.Ay.Group,{value:u,onChange:e=>y(e.target.value),disabled:g,style:{width:"100%"},children:(0,q.jsx)(x.A,{wrap:!0,children:te.map(e=>(0,q.jsx)($.Ay.Button,{value:e.value,style:{borderColor:e.color,color:u===e.value?"white":e.color,backgroundColor:u===e.value?e.color:"white",fontWeight:u===e.value?"bold":"normal"},children:e.label},e.value))})})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)(oe,{level:5,style:{marginBottom:8},children:"\ubcc0\uacbd \uc0ac\uc720 (\uc120\ud0dd\uc0ac\ud56d)"}),(0,q.jsx)(se,{value:j,onChange:e=>A(e.target.value),placeholder:"\uc0c1\ud0dc \ubcc0\uacbd \uc0ac\uc720\ub97c \uc785\ub825\ud558\uc138\uc694...",rows:3,disabled:g})]}),u!==c&&(0,q.jsx)(Z.A,{message:"\ubcc0\uacbd \uc608\uc815",description:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(_.A,{color:null===(r=te.find(e=>e.value===c))||void 0===r?void 0:r.color,children:c}),(0,q.jsx)("span",{children:"\u2192"}),(0,q.jsx)(_.A,{color:null===(s=te.find(e=>e.value===u))||void 0===s?void 0:s.color,style:{fontSize:14,padding:"4px 12px"},children:u})]}),type:"success",showIcon:!0})]})})},{Text:le}=l.A,ie=e=>{let{orders:t,loading:r,error:s,onRefresh:a,onDeleteOrders:l,onUpdateStatus:i,onAddMemo:c,onUpdateField:h}=e;const[A,g]=(0,o.useState)([]),[f,m]=(0,o.useState)(null),[w,v]=(0,o.useState)(!1),[S,b]=(0,o.useState)(!1),C=e=>{m(e),v(!0)},T=[{title:"\uc811\uc218\uc77c\uc2dc",dataIndex:"time",key:"time",width:100,sorter:(e,t)=>new Date(e.time).getTime()-new Date(t.time).getTime(),render:e=>{const t=new Date(e);return(0,q.jsxs)(x.A,{direction:"vertical",size:0,children:[(0,q.jsx)(le,{style:{fontSize:11},children:t.toLocaleDateString("ko-KR")}),(0,q.jsx)(le,{type:"secondary",style:{fontSize:10},children:t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})}},{title:"\uc9c0\uc815\uc5ec\ubd80",dataIndex:"designation_type",key:"designation_type",width:100,filters:[{text:"\uc9c0\uc815\uc5c6\uc74c",value:"\uc9c0\uc815\uc5c6\uc74c"},{text:"\uc5c5\uccb4\uc9c0\uc815",value:"\uc5c5\uccb4\uc9c0\uc815"},{text:"\uacf5\ub3d9\uad6c\ub9e4",value:"\uacf5\ub3d9\uad6c\ub9e4"}],onFilter:(e,t)=>t.designation_type===e,render:(e,t)=>(0,q.jsxs)(x.A,{direction:"vertical",size:0,children:[(0,q.jsx)(_.A,{color:"\uc5c5\uccb4\uc9c0\uc815"===e?"blue":"\uacf5\ub3d9\uad6c\ub9e4"===e?"green":"default",children:e}),t.designation&&(0,q.jsx)(le,{style:{fontSize:10},children:t.designation})]})},{title:"\uace0\uac1d\uc815\ubcf4",key:"customer_info",width:180,render:(e,t)=>(0,q.jsxs)(x.A,{direction:"vertical",size:0,children:[(0,q.jsxs)(x.A,{size:4,children:[(0,q.jsx)(L.A,{style:{fontSize:11}}),(0,q.jsx)(le,{strong:!0,style:{fontSize:12},children:t.sName}),t.sNick&&(0,q.jsx)(_.A,{color:"orange",style:{fontSize:10},children:t.sNick})]}),t.sNaverID&&(0,q.jsxs)(le,{type:"secondary",style:{fontSize:11},children:["ID: ",t.sNaverID]}),(0,q.jsx)(O.A,{title:"\uc804\ud654 \uac78\uae30",children:(0,q.jsxs)("a",{href:"tel:".concat(t.sPhone),style:{fontSize:11},children:[(0,q.jsx)(D.A,{})," ",t.sPhone]})})]})},{title:"\uc758\ub8b0\uac8c\uc2dc\uae00",dataIndex:"post_link",key:"post_link",width:100,render:(e,t)=>(0,q.jsxs)(x.A,{direction:"vertical",size:0,children:[t.sPost&&(0,q.jsx)(le,{ellipsis:!0,style:{maxWidth:90,fontSize:11},children:t.sPost}),e&&(0,q.jsx)(O.A,{title:e,children:(0,q.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:[(0,q.jsx)(F.A,{})," \ubcf4\uae30"]})})]})},{title:"\uacf5\uc0ac\uc9c0\uc5ed",dataIndex:"sArea",key:"sArea",width:90,filters:Array.from(new Set(t.map(e=>e.sArea))).map(e=>({text:e,value:e})),onFilter:(e,t)=>t.sArea===e,render:e=>(0,q.jsxs)(_.A,{color:"blue",style:{fontSize:11},children:[(0,q.jsx)(R.A,{})," ",e]})},{title:"\uacf5\uc0ac\uc608\uc815\uc77c",dataIndex:"dateSchedule",key:"dateSchedule",width:100,sorter:(e,t)=>e.dateSchedule?t.dateSchedule?new Date(e.dateSchedule).getTime()-new Date(t.dateSchedule).getTime():-1:1,render:e=>{if(!e)return(0,q.jsx)(le,{type:"secondary",style:{fontSize:11},children:"\ubbf8\uc815"});const t=new Date(e),r=new Date,s=Math.ceil((t.getTime()-r.getTime())/864e5);let n="default";return n=s<0?"red":0===s?"orange":s<=3?"gold":"green",(0,q.jsxs)(_.A,{color:n,style:{fontSize:11},children:[(0,q.jsx)(N.A,{})," ",t.toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"}),0===s&&" (\uc624\ub298)"]})}},{title:"\uacf5\uc0ac\ub0b4\uc6a9",dataIndex:"sConstruction",key:"sConstruction",width:150,ellipsis:{showTitle:!1},render:e=>(0,q.jsx)(O.A,{placement:"topLeft",title:e,children:(0,q.jsx)(le,{ellipsis:!0,style:{maxWidth:"100%",fontSize:11},children:e})})},{title:"\uc5c5\uccb4\ud560\ub2f9",dataIndex:"assigned_company",key:"assigned_company",width:110,filters:Array.from(new Set(t.map(e=>e.assigned_company).filter(Boolean))).map(e=>({text:e,value:e})),onFilter:(e,t)=>t.assigned_company===e,render:e=>e?(0,q.jsxs)(_.A,{color:"purple",style:{fontSize:11},children:[(0,q.jsx)(k.A,{})," ",e]}):(0,q.jsx)(p.Ay,{type:"dashed",size:"small",style:{fontSize:10},children:"\ud560\ub2f9\ud558\uae30"})},{title:"\ud560\ub2f9\uc0c1\ud0dc",dataIndex:"recent_status",key:"recent_status",width:90,filters:te.map(e=>({text:e.label,value:e.value})),onFilter:(e,t)=>t.recent_status===e,render:e=>{const t=te.find(t=>t.value===e);return(0,q.jsx)(_.A,{color:null===t||void 0===t?void 0:t.color,style:{cursor:"pointer",fontSize:11},onClick:()=>(m({recent_status:e}),void b(!0)),children:e})}},{title:"\uc7ac\uc758\ub8b0",dataIndex:"re_request_count",key:"re_request_count",width:70,align:"center",render:e=>e>0?(0,q.jsx)(E.A,{count:e,style:{backgroundColor:"#ff4d4f"}}):(0,q.jsx)(le,{type:"secondary",style:{fontSize:11},children:"0"})},{title:"\uacac\uc801\uc11c\ub9c1\ud06c",key:"quote_links",width:100,render:(e,t)=>(0,q.jsx)(x.A,{children:t.quote_links&&t.quote_links.length>0?(0,q.jsx)(E.A,{count:t.quote_links.length,children:(0,q.jsx)(p.Ay,{size:"small",icon:(0,q.jsx)(F.A,{}),style:{fontSize:10},children:"\ubcf4\uae30"})}):(0,q.jsx)(p.Ay,{size:"small",type:"dashed",style:{fontSize:10},children:"\ucd94\uac00"})})},{title:"\uba54\ubaa8",key:"memo",width:70,align:"center",render:(e,t)=>(0,q.jsx)(O.A,{title:"\uba54\ubaa8 \uad00\ub9ac",children:(0,q.jsx)(p.Ay,{type:"text",size:"small",icon:(0,q.jsx)(B.A,{}),onClick:()=>C(t),style:{fontSize:11}})})},{title:"\ubcf5\uc0ac",key:"copy",width:60,fixed:"right",align:"center",render:(e,t)=>(0,q.jsx)(O.A,{title:"\uac19\uc740 \uc815\ubcf4\ub85c \ubcf5\uc0ac",children:(0,q.jsx)(p.Ay,{type:"text",size:"small",icon:(0,q.jsx)(U.A,{}),onClick:()=>(async e=>{(0,n.A)((0,n.A)({},e),{},{no:void 0,time:(new Date).toISOString(),recent_status:"\ub300\uae30\uc911",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});try{d.Ay.success("\uc758\ub8b0\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),a()}catch(s){d.Ay.error("\ubcf5\uc0ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4")}})(t),style:{fontSize:11}})})}],z={selectedRowKeys:A,onChange:e=>{g(e)},selections:[I.A.SELECTION_ALL,I.A.SELECTION_INVERT,I.A.SELECTION_NONE]};return s&&!r?(0,q.jsxs)("div",{style:{textAlign:"center",padding:"50px 0"},children:[(0,q.jsx)(le,{type:"danger",style:{fontSize:16,display:"block",marginBottom:20},children:s}),(0,q.jsx)(p.Ay,{type:"primary",onClick:a,icon:(0,q.jsx)(M.A,{}),children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(u.A,{gutter:[16,16],style:{marginBottom:16},children:[(0,q.jsx)(y.A,{flex:"auto",children:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(P.A,{title:"\uc120\ud0dd\ud55c \ud56d\ubaa9\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",onConfirm:async()=>{if(0===A.length)return void d.Ay.warning("\uc0ad\uc81c\ud560 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");const e=await l(A);e.success?(d.Ay.success("".concat(A.length,"\uac1c \ud56d\ubaa9\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),g([])):d.Ay.error(e.error||"\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")},okText:"\uc0ad\uc81c",cancelText:"\ucde8\uc18c",disabled:0===A.length,children:(0,q.jsxs)(p.Ay,{danger:!0,icon:(0,q.jsx)(H.A,{}),disabled:0===A.length,children:["\uc0ad\uc81c (",A.length,")"]})}),(0,q.jsx)(p.Ay,{icon:(0,q.jsx)(Y.A,{}),onClick:()=>{const e=[["\ubc88\ud638","\uc811\uc218\uc77c\uc2dc","\uace0\uac1d\uba85","\uc804\ud654\ubc88\ud638","\uc9c0\uc5ed","\uacf5\uc0ac\ub0b4\uc6a9","\uc5c5\uccb4","\uc0c1\ud0dc"].join(","),...t.map(e=>[e.no,e.time,e.sName,e.sPhone,e.sArea,'"'.concat(e.sConstruction.replace(/"/g,'""'),'"'),e.assigned_company||"",e.recent_status].join(","))].join("\n"),r=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),n=URL.createObjectURL(r);s.setAttribute("href",n),s.setAttribute("download","orders_".concat((new Date).toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),d.Ay.success("\ub0b4\ubcf4\ub0b4\uae30\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},children:"\ub0b4\ubcf4\ub0b4\uae30"}),(0,q.jsx)(p.Ay,{icon:(0,q.jsx)(M.A,{}),onClick:a,children:"\uc0c8\ub85c\uace0\uce68"})]})}),(0,q.jsx)(y.A,{children:(0,q.jsx)(E.A,{count:t.length,showZero:!0,color:"#1890ff"})})]}),(0,q.jsx)(I.A,{rowSelection:z,columns:T,dataSource:t,rowKey:"no",loading:r,scroll:{x:1600},size:"middle",bordered:!0,pagination:{defaultPageSize:20,showSizeChanger:!0,showTotal:(e,t)=>"".concat(t[0],"-").concat(t[1]," / \ucd1d ").concat(e,"\uac1c"),pageSizeOptions:["10","20","50","100"],showQuickJumper:!0},expandable:{expandedRowRender:e=>(0,q.jsx)("div",{style:{padding:"16px",background:"#fafafa",borderRadius:8},children:(0,q.jsxs)(u.A,{gutter:[24,16],children:[(0,q.jsx)(y.A,{span:8,children:(0,q.jsx)(j.A,{size:"small",title:"\uac1c\uc778\uc815\ubcf4 \ub3d9\uc758",bordered:!1,children:(0,q.jsxs)(x.A,{direction:"vertical",style:{width:"100%"},children:[(0,q.jsxs)(u.A,{justify:"space-between",children:[(0,q.jsx)(le,{children:"\ub9c8\ucf00\ud305 \ub3d9\uc758:"}),(0,q.jsx)(_.A,{color:e.bPrivacy1?"green":"red",children:e.bPrivacy1?"\ub3d9\uc758":"\ubbf8\ub3d9\uc758"})]}),(0,q.jsxs)(u.A,{justify:"space-between",children:[(0,q.jsx)(le,{children:"\uac1c\uc778\uc815\ubcf4 \ub3d9\uc758:"}),(0,q.jsx)(_.A,{color:e.bPrivacy2?"green":"red",children:e.bPrivacy2?"\ub3d9\uc758":"\ubbf8\ub3d9\uc758"})]})]})})}),(0,q.jsx)(y.A,{span:8,children:(0,q.jsx)(j.A,{size:"small",title:"\ucd94\uac00 \uc815\ubcf4",bordered:!1,children:(0,q.jsxs)(x.A,{direction:"vertical",style:{width:"100%"},children:[e.post_link&&(0,q.jsxs)(u.A,{children:[(0,q.jsx)(le,{strong:!0,children:"\uac8c\uc2dc\uae00: "}),(0,q.jsx)("a",{href:e.post_link,target:"_blank",rel:"noopener noreferrer",children:"\ub9c1\ud06c \ubcf4\uae30"})]}),(0,q.jsx)(u.A,{children:(0,q.jsxs)(le,{children:["\ub4f1\ub85d \uacbd\ub85c: ",e.designation_type||"-"]})})]})})}),(0,q.jsx)(y.A,{span:8,children:(0,q.jsx)(j.A,{size:"small",title:"\uba54\ubaa8",bordered:!1,children:(0,q.jsx)(p.Ay,{type:"link",onClick:()=>C(e),children:"\uba54\ubaa8 \ucd94\uac00/\ud655\uc778"})})})]})}),rowExpandable:e=>!0,expandRowByClick:!1}}),f&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(X,{isOpen:w,onClose:()=>v(!1),orderId:f.no,orderName:f.sName,memos:[],onAddMemo:async e=>c(f.no,e)}),(0,q.jsx)(ae,{isOpen:S,onClose:()=>b(!1),orderId:f.no,orderName:f.sName,currentStatus:f.recent_status,onStatusUpdate:async(e,t)=>i(f.no,e,t)})]})]})};const ce=new class{constructor(){this.baseURL="https://carpenterhosting.cafe24.com"}async fetchOrders(){try{const e=await fetch("".concat(this.baseURL,"/order/api/orders/"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return(await e.json()).results||[]}catch(e){throw console.error("Error fetching orders:",e),e}}async createOrder(e){try{const t=await fetch("".concat(this.baseURL,"/order/api/orders/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(t){throw console.error("Error creating order:",t),t}}async updateOrderStatus(e,t,r){try{const s=await fetch("".concat(this.baseURL,"/order/api/orders/").concat(e,"/update_status/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,n.A)({status:t},r))});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status))}catch(s){throw console.error("Error updating order status:",s),s}}async updateOrderField(e,t,r,s){try{const n=await fetch("".concat(this.baseURL,"/order/api/orders/").concat(e,"/update_field/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_name:t,field_label:r,new_value:s,author:"\uad00\ub9ac\uc790"})});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status))}catch(n){throw console.error("Error updating order field:",n),n}}async addMemo(e,t){try{const r=await fetch("".concat(this.baseURL,"/order/api/orders/").concat(e,"/add_memo/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t,author:"\uad00\ub9ac\uc790"})});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status))}catch(r){throw console.error("Error adding memo:",r),r}}async addQuoteLink(e,t,r){try{const s=await fetch("".concat(this.baseURL,"/order/api/orders/").concat(e,"/add_quote_link/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({draft_type:t,link:r})});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status))}catch(s){throw console.error("Error adding quote link:",s),s}}async deleteOrders(e){try{const t=await fetch("".concat(this.baseURL,"/order/api/orders/bulk_delete/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e})});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status))}catch(t){throw console.error("Error deleting orders:",t),t}}async fetchCompanies(){try{const e=await fetch("".concat(this.baseURL,"/order/api/companies/"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error fetching companies:",e),e}}async fetchAreas(){try{const e=await fetch("".concat(this.baseURL,"/order/api/areas/"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error fetching areas:",e),e}}},de=["dateFrom","dateTo"],{Header:he,Content:ue}=a.A,{Title:ye,Text:xe}=l.A,{Search:pe}=i.A,{RangePicker:je}=c.A,Ae=()=>{const{orders:e,loading:t,error:r,filters:l,setFilters:i,actions:c}=(()=>{const[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[n,a]=(0,o.useState)(null),[l,i]=(0,o.useState)({}),[c,d]=(0,o.useState)({field:"no",order:"desc"}),h=(0,o.useCallback)(async()=>{try{s(!0),a(null);const e=await ce.fetchOrders();t(e)}catch(e){a("\uc758\ub8b0 \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),console.error("Error fetching orders:",e)}finally{s(!1)}},[]),u=(0,o.useCallback)(async e=>{try{return await ce.deleteOrders(e),await h(),{success:!0}}catch(t){return console.error("Error deleting orders:",t),{success:!1,error:"\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}}},[h]),y=(0,o.useCallback)(async(e,t,r)=>{try{return await ce.updateOrderStatus(e,t,r),await h(),{success:!0}}catch(s){return console.error("Error updating order status:",s),{success:!1,error:"\uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}}},[h]),x=(0,o.useCallback)(async(e,t,r,s)=>{try{return await ce.updateOrderField(e,t,r,s),await h(),{success:!0}}catch(n){return console.error("Error updating order field:",n),{success:!1,error:"\ud544\ub4dc \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}}},[h]),p=(0,o.useCallback)(async(e,t)=>{try{return await ce.addMemo(e,t),await h(),{success:!0}}catch(r){return console.error("Error adding memo:",r),{success:!1,error:"\uba54\ubaa8 \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}}},[h]),j=(0,o.useCallback)(async(e,t,r)=>{try{return await ce.addQuoteLink(e,t,r),await h(),{success:!0}}catch(s){return console.error("Error adding quote link:",s),{success:!1,error:"\uacac\uc801 \ub9c1\ud06c \ucd94\uac00 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}}},[h]),A=(0,o.useCallback)(()=>{let t=[...e];if(l.status&&(t=t.filter(e=>e.recent_status===l.status)),l.area&&(t=t.filter(e=>e.sArea===l.area)),l.company&&(t=t.filter(e=>e.assigned_company===l.company)),l.searchText){const e=l.searchText.toLowerCase(),r=l.searchText;t=t.filter(t=>t.sName.toLowerCase().includes(e)||t.sNick.toLowerCase().includes(e)||t.sPhone.includes(r)||t.sNaverID.toLowerCase().includes(e))}return t.sort((e,t)=>{const r=e[c.field],s=t[c.field];if(void 0===r||void 0===s)return 0;const n=r<s?-1:r>s?1:0;return"asc"===c.order?n:-n}),t},[e,l,c]);return(0,o.useEffect)(()=>{h()},[h]),{orders:A(),loading:r,error:n,filters:l,setFilters:i,sortOptions:c,setSortOptions:d,actions:{fetchOrders:h,deleteOrders:u,updateOrderStatus:y,updateOrderField:x,addMemo:p,addQuoteLink:j}}})(),[_,O]=(0,o.useState)(""),[E,I]=(0,o.useState)(!1),P={total:e.length,pending:e.filter(e=>"\uc811\uc218\uc644\ub8cc"===e.recent_status).length,inProgress:e.filter(e=>["\uc5c5\uccb4\uc804\ub2ec","\ud604\uc7a5\ubbf8\ud305","\uacac\uc801\uc804\ub2ec","\uc2dc\uacf5\uc911"].includes(e.recent_status)).length,completed:e.filter(e=>"\uc644\ub8cc"===e.recent_status).length},L=(e,t)=>{i((0,n.A)((0,n.A)({},l),{},{[e]:t||void 0}))};return(0,q.jsx)(h.Ay,{locale:z.A,children:(0,q.jsxs)(a.A,{style:{minHeight:"100vh",background:"#f0f2f5"},children:[(0,q.jsx)(he,{style:{background:"#fff",padding:0,boxShadow:"0 1px 4px rgba(0,21,41,.08)"},children:(0,q.jsxs)(u.A,{align:"middle",style:{height:"100%",padding:"0 24px"},children:[(0,q.jsx)(y.A,{flex:"auto",children:(0,q.jsxs)(x.A,{align:"center",children:[(0,q.jsx)(m.A,{style:{fontSize:24,color:"#1890ff"}}),(0,q.jsx)(ye,{level:3,style:{margin:0},children:"\uc758\ub8b0 \uad00\ub9ac \uc2dc\uc2a4\ud15c"})]})}),(0,q.jsx)(y.A,{children:(0,q.jsxs)(x.A,{children:[(0,q.jsx)(p.Ay,{icon:(0,q.jsx)(w.A,{spin:E}),size:"large",loading:E,onClick:async()=>{I(!0);try{const e=await fetch("http://localhost:8000/order/api/sync-google-sheets/",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();t.success?(d.Ay.success("\ub3d9\uae30\ud654 \uc644\ub8cc: ".concat(t.result.created,"\uac1c \uc0c8 \uc758\ub8b0 \ucd94\uac00")),c.fetchOrders()):d.Ay.error(t.message||"\ub3d9\uae30\ud654 \uc2e4\ud328")}catch(r){d.Ay.error("\ub3d9\uae30\ud654 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),console.error("Sync error:",r)}finally{I(!1)}},style:{borderColor:"#4285f4",color:"#4285f4"},children:"\uad6c\uae00 \uc2dc\ud2b8 \ub3d9\uae30\ud654"}),(0,q.jsx)(p.Ay,{type:"primary",icon:(0,q.jsx)(v.A,{}),size:"large",onClick:()=>{window.open("https://docs.google.com/forms/d/e/1FAIpQLSfOnhe1eBTRM5bb-r_XA6epsUkPctmqexzcwJk-MC5KlC3F4g/viewform","_blank")},children:"\uc0c8 \uc758\ub8b0"})]})})]})}),(0,q.jsxs)(ue,{style:{padding:"24px"},children:[(0,q.jsxs)(u.A,{gutter:16,style:{marginBottom:24},children:[(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(j.A,{children:(0,q.jsx)(A.A,{title:"\uc804\uccb4 \uc758\ub8b0",value:P.total,prefix:(0,q.jsx)(S.A,{}),valueStyle:{color:"#1890ff"}})})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(j.A,{children:(0,q.jsx)(A.A,{title:"\ub300\uae30\uc911",value:P.pending,prefix:(0,q.jsx)(b.A,{}),valueStyle:{color:"#faad14"}})})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(j.A,{children:(0,q.jsx)(A.A,{title:"\uc9c4\ud589\uc911",value:P.inProgress,prefix:(0,q.jsx)(k.A,{}),valueStyle:{color:"#52c41a"}})})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(j.A,{children:(0,q.jsx)(A.A,{title:"\uc644\ub8cc",value:P.completed,prefix:(0,q.jsx)(C.A,{}),valueStyle:{color:"#13c2c2"}})})})]}),(0,q.jsx)(j.A,{style:{marginBottom:24},children:(0,q.jsxs)(x.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,q.jsxs)(u.A,{gutter:16,children:[(0,q.jsx)(y.A,{span:12,children:(0,q.jsx)(pe,{placeholder:"\uace0\uac1d\uba85, \uc804\ud654\ubc88\ud638, \ub124\uc774\ubc84ID\ub85c \uac80\uc0c9...",allowClear:!0,enterButton:(0,q.jsx)(T.A,{}),size:"large",value:_,onChange:e=>O(e.target.value),onSearch:e=>{i((0,n.A)((0,n.A)({},l),{},{searchText:e}))}})}),(0,q.jsx)(y.A,{span:12,children:(0,q.jsx)(je,{style:{width:"100%"},size:"large",placeholder:["\uc2dc\uc791\uc77c","\uc885\ub8cc\uc77c"],onChange:e=>{if(e){var t,r;i((0,n.A)((0,n.A)({},l),{},{dateFrom:null===(t=e[0])||void 0===t?void 0:t.format("YYYY-MM-DD"),dateTo:null===(r=e[1])||void 0===r?void 0:r.format("YYYY-MM-DD")}))}else{const{dateFrom:e,dateTo:t}=l,r=(0,s.A)(l,de);i(r)}},format:"YYYY-MM-DD"})})]}),(0,q.jsxs)(u.A,{gutter:16,align:"middle",children:[(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(g.A,{placeholder:"\uc0c1\ud0dc \uc120\ud0dd",style:{width:"100%"},allowClear:!0,onChange:e=>L("status",e),options:[{label:"\uc804\uccb4 \uc0c1\ud0dc",value:""},...te.map(e=>({label:e.label,value:e.value}))]})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(g.A,{placeholder:"\uc9c0\uc5ed \uc120\ud0dd",style:{width:"100%"},allowClear:!0,onChange:e=>L("area",e),options:[{label:"\uc804\uccb4 \uc9c0\uc5ed",value:""},...re.map(e=>({label:e,value:e}))]})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(g.A,{placeholder:"\uc5c5\uccb4 \uc120\ud0dd",style:{width:"100%"},allowClear:!0,onChange:e=>L("company",e),options:[{label:"\uc804\uccb4 \uc5c5\uccb4",value:""},{label:"\uc5c5\uccb4A",value:"\uc5c5\uccb4A"},{label:"\uc5c5\uccb4B",value:"\uc5c5\uccb4B"},{label:"\uc5c5\uccb4C",value:"\uc5c5\uccb4C"}]})}),(0,q.jsx)(y.A,{span:6,children:(0,q.jsx)(p.Ay,{onClick:()=>{i({}),O("")},children:"\ud544\ud130 \ucd08\uae30\ud654"})})]}),Object.keys(l).length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(f.A,{style:{margin:"12px 0"}}),(0,q.jsxs)(x.A,{wrap:!0,children:[(0,q.jsx)(xe,{type:"secondary",children:"\ud65c\uc131 \ud544\ud130:"}),l.searchText&&(0,q.jsxs)(p.Ay,{size:"small",type:"dashed",children:["\uac80\uc0c9: ",l.searchText]}),l.status&&(0,q.jsxs)(p.Ay,{size:"small",type:"dashed",children:["\uc0c1\ud0dc: ",l.status]}),l.area&&(0,q.jsxs)(p.Ay,{size:"small",type:"dashed",children:["\uc9c0\uc5ed: ",l.area]}),l.company&&(0,q.jsxs)(p.Ay,{size:"small",type:"dashed",children:["\uc5c5\uccb4: ",l.company]}),l.dateFrom&&l.dateTo&&(0,q.jsxs)(p.Ay,{size:"small",type:"dashed",children:["\uae30\uac04: ",l.dateFrom," ~ ",l.dateTo]})]})]})]})}),(0,q.jsx)(j.A,{children:(0,q.jsx)(ie,{orders:e,loading:t,error:r,onRefresh:c.fetchOrders,onDeleteOrders:c.deleteOrders,onUpdateStatus:c.updateOrderStatus,onAddMemo:c.addMemo,onUpdateField:c.updateOrderField})})]})]})})}}}]);
//# sourceMappingURL=459.efefd347.chunk.js.map