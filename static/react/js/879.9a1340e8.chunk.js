"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[879],{52:(t,e,a)=>{a.d(e,{Q:()=>r});var o=a(6403);const r=new class{constructor(){this.api=void 0;const t=window.__DJANGO_CONTEXT__||{};let e=t.apiBaseUrl||"https://carpenterhosting.cafe24.com";e+="/order/api",this.api=o.A.create({baseURL:e,headers:{"Content-Type":"application/json","X-CSRFToken":t.csrfToken||""},withCredentials:!0}),this.api.interceptors.request.use(t=>{var e;return console.log("API Request:",null===(e=t.method)||void 0===e?void 0:e.toUpperCase(),t.url),t},t=>(console.error("Request Error:",t),Promise.reject(t))),this.api.interceptors.response.use(t=>t,t=>(this.handleError(t),Promise.reject(t)))}handleError(t){if(t.response){const{status:e,data:a}=t.response,o=(null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.detail)||"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";switch(e){case 400:console.error("\uc798\ubabb\ub41c \uc694\uccad:",o);break;case 401:console.error("\uc778\uc99d \ud544\uc694"),window.location.href="/accounts/login/";break;case 403:console.error("\uad8c\ud55c \uc5c6\uc74c:",o);break;case 404:console.error("\ub9ac\uc18c\uc2a4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",o);break;case 500:console.error("\uc11c\ubc84 \uc624\ub958:",o);break;default:console.error("\uc624\ub958:",o)}}else t.request?console.error("\ub124\ud2b8\uc6cc\ud06c \uc624\ub958: \uc11c\ubc84\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):console.error("\uc624\ub958:",t.message)}async getOrders(t){try{return(await this.api.get("/orders/",{params:t})).data}catch(e){throw console.error("\uc758\ub8b0 \ubaa9\ub85d \uc870\ud68c \uc2e4\ud328:",e),e}}async getOrder(t){try{return(await this.api.get("/orders/".concat(t,"/"))).data}catch(e){throw console.error("\uc758\ub8b0 \uc870\ud68c \uc2e4\ud328:",e),e}}async createOrder(t){try{return(await this.api.post("/orders/",t)).data}catch(e){throw console.error("\uc758\ub8b0 \uc0dd\uc131 \uc2e4\ud328:",e),e}}async updateStatus(t,e){try{return(await this.api.post("/orders/".concat(t,"/update_status/"),e)).data}catch(a){throw console.error("\uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",a),a}}async updateField(t,e){try{return(await this.api.post("/orders/".concat(t,"/update_field/"),e)).data}catch(a){throw console.error("\ud544\ub4dc \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",a),a}}async addMemo(t,e,a){try{return(await this.api.post("/orders/".concat(t,"/add_memo/"),{content:e,author:a||"\uad00\ub9ac\uc790"})).data}catch(o){throw console.error("\uba54\ubaa8 \ucd94\uac00 \uc2e4\ud328:",o),o}}async addQuoteLink(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\ucd08\uc548";try{return(await this.api.post("/orders/".concat(t,"/add_quote_link/"),{link:e,draft_type:a})).data}catch(o){throw console.error("\uacac\uc801\uc11c \ub9c1\ud06c \ucd94\uac00 \uc2e4\ud328:",o),o}}async copyOrder(t){try{return(await this.api.post("/orders/".concat(t,"/copy/"))).data}catch(e){throw console.error("\uc758\ub8b0 \ubcf5\uc0ac \uc2e4\ud328:",e),e}}async deleteOrder(t){try{await this.api.delete("/orders/".concat(t,"/"))}catch(e){throw console.error("\uc758\ub8b0 \uc0ad\uc81c \uc2e4\ud328:",e),e}}async bulkDelete(t){try{await this.api.post("/orders/bulk_delete/",{order_ids:t})}catch(e){throw console.error("\ub300\ub7c9 \uc0ad\uc81c \uc2e4\ud328:",e),e}}async getCompanies(){try{return(await this.api.get("/companies/")).data}catch(t){throw console.error("\uc5c5\uccb4 \ubaa9\ub85d \uc870\ud68c \uc2e4\ud328:",t),t}}async getStatistics(t){try{return(await this.api.get("/statistics/",{params:{date_from:null===t||void 0===t?void 0:t[0],date_to:null===t||void 0===t?void 0:t[1]}})).data}catch(e){throw console.error("\ud1b5\uacc4 \uc870\ud68c \uc2e4\ud328:",e),e}}async exportToExcel(t){try{return(await this.api.get("/orders/export/",{params:t,responseType:"blob"})).data}catch(e){throw console.error("Excel \ub0b4\ubcf4\ub0b4\uae30 \uc2e4\ud328:",e),e}}async syncWithGoogleSheets(){try{return(await this.api.post("/orders/sync_google_sheets/")).data}catch(t){throw console.error("Google Sheets \ub3d9\uae30\ud654 \uc2e4\ud328:",t),t}}}},879:(t,e,a)=>{a.r(e),a.d(e,{default:()=>L});var o=a(5043),r=a(6399),n=a(7419),i=a(1645),c=a(5531),l=a(6612),s=a(7692),d=a(8139),m=a.n(d),h=a(5296),p=a(8887),u=a(3944),g=a(4414),y=a(8855),f=a(8446);const v=(0,y.OF)("Timeline",t=>(t=>{const{componentCls:e,calc:a}=t;return{[e]:Object.assign(Object.assign({},(0,g.dF)(t)),{margin:0,padding:0,listStyle:"none",["".concat(e,"-item")]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:a(a(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:"calc(100% - ".concat((0,u.zA)(t.itemHeadSize),")"),borderInlineStart:"".concat((0,u.zA)(t.tailWidth)," ").concat(t.lineType," ").concat(t.tailColor)},"&-pending":{["".concat(e,"-item-head")]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},["".concat(e,"-item-tail")]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:"".concat((0,u.zA)(t.dotBorderWidth)," ").concat(t.lineType," transparent"),borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:a(t.itemHeadSize).div(2).equal(),insetInlineStart:a(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:a(a(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:a(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{["> ".concat(e,"-item-tail")]:{display:"none"},["> ".concat(e,"-item-content")]:{minHeight:a(t.controlHeightLG).mul(1.2).equal()}}},["&".concat(e,"-alternate,\n        &").concat(e,"-right,\n        &").concat(e,"-label")]:{["".concat(e,"-item")]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:a(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:a(t.tailWidth).div(2).equal()}},"&-left":{["".concat(e,"-item-content")]:{insetInlineStart:"calc(50% - ".concat((0,u.zA)(t.marginXXS),")"),width:"calc(50% - ".concat((0,u.zA)(t.marginSM),")"),textAlign:"start"}},"&-right":{["".concat(e,"-item-content")]:{width:"calc(50% - ".concat((0,u.zA)(t.marginSM),")"),margin:0,textAlign:"end"}}}},["&".concat(e,"-right")]:{["".concat(e,"-item-right")]:{["".concat(e,"-item-tail,\n            ").concat(e,"-item-head,\n            ").concat(e,"-item-head-custom")]:{insetInlineStart:"calc(100% - ".concat((0,u.zA)(a(a(t.itemHeadSize).add(t.tailWidth)).div(2).equal()),")")},["".concat(e,"-item-content")]:{width:"calc(100% - ".concat((0,u.zA)(a(t.itemHeadSize).add(t.marginXS).equal()),")")}}},["&".concat(e,"-pending\n        ").concat(e,"-item-last\n        ").concat(e,"-item-tail")]:{display:"block",height:"calc(100% - ".concat((0,u.zA)(t.margin),")"),borderInlineStart:"".concat((0,u.zA)(t.tailWidth)," dotted ").concat(t.tailColor)},["&".concat(e,"-reverse\n        ").concat(e,"-item-last\n        ").concat(e,"-item-tail")]:{display:"none"},["&".concat(e,"-reverse ").concat(e,"-item-pending")]:{["".concat(e,"-item-tail")]:{insetBlockStart:t.margin,display:"block",height:"calc(100% - ".concat((0,u.zA)(t.margin),")"),borderInlineStart:"".concat((0,u.zA)(t.tailWidth)," dotted ").concat(t.tailColor)},["".concat(e,"-item-content")]:{minHeight:a(t.controlHeightLG).mul(1.2).equal()}},["&".concat(e,"-label")]:{["".concat(e,"-item-label")]:{position:"absolute",insetBlockStart:a(a(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:"calc(50% - ".concat((0,u.zA)(t.marginSM),")"),textAlign:"end"},["".concat(e,"-item-right")]:{["".concat(e,"-item-label")]:{insetInlineStart:"calc(50% + ".concat((0,u.zA)(t.marginSM),")"),width:"calc(50% - ".concat((0,u.zA)(t.marginSM),")"),textAlign:"start"}}},"&-rtl":{direction:"rtl",["".concat(e,"-item-head-custom")]:{transform:"translate(50%, -50%)"}}})}})((0,f.oX)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2})),t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:3*t.lineWidth,dotBg:t.colorBgContainer,itemPaddingBottom:1.25*t.padding}));var b=function(t,e){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(a[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(a[o[r]]=t[o[r]])}return a};const S=t=>{var{prefixCls:e,className:a,color:r="blue",dot:n,pending:i=!1,position:c,label:l,children:s}=t,d=b(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:p}=o.useContext(h.QO),u=p("timeline",e),g=m()("".concat(u,"-item"),{["".concat(u,"-item-pending")]:i},a),y=/blue|red|green|gray/.test(r||"")?void 0:r,f=m()("".concat(u,"-item-head"),{["".concat(u,"-item-head-custom")]:!!n,["".concat(u,"-item-head-").concat(r)]:!y});return o.createElement("li",Object.assign({},d,{className:g}),l&&o.createElement("div",{className:"".concat(u,"-item-label")},l),o.createElement("div",{className:"".concat(u,"-item-tail")}),o.createElement("div",{className:f,style:{borderColor:y,color:y}},n),o.createElement("div",{className:"".concat(u,"-item-content")},s))};var w=a(436),x=a(164),A=function(t,e){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(a[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(a[o[r]]=t[o[r]])}return a};const j=t=>{var{prefixCls:e,className:a,pending:r=!1,children:n,items:i,rootClassName:c,reverse:l=!1,direction:s,hashId:d,pendingDot:h,mode:p=""}=t,u=A(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const g=(t,a)=>"alternate"===p?"".concat(e,"right"===t?"-item-right":"left"===t||a%2===0?"-item-left":"-item-right"):"left"===p?"".concat(e,"-item-left"):"right"===p||"right"===t?"".concat(e,"-item-right"):"",y=(0,w.A)(i||[]),f="boolean"===typeof r?null:r;r&&y.push({pending:!!r,dot:h||o.createElement(x.A,null),children:f}),l&&y.reverse();const v=y.length,b="".concat(e,"-item-last"),j=y.filter(t=>!!t).map((t,e)=>{var a;const n=e===v-2?b:"",i=e===v-1?b:"",{className:c}=t,s=A(t,["className"]);return o.createElement(S,Object.assign({},s,{className:m()([c,!l&&r?n:i,g(null!==(a=null===t||void 0===t?void 0:t.position)&&void 0!==a?a:"",e)]),key:(null===t||void 0===t?void 0:t.key)||e}))}),O=y.some(t=>!!(null===t||void 0===t?void 0:t.label)),k=m()(e,{["".concat(e,"-pending")]:!!r,["".concat(e,"-reverse")]:!!l,["".concat(e,"-").concat(p)]:!!p&&!O,["".concat(e,"-label")]:O,["".concat(e,"-rtl")]:"rtl"===s},a,c,d);return o.createElement("ol",Object.assign({},u,{className:k}),j)};var O=a(2149);const k=function(t,e){return t&&Array.isArray(t)?t:(0,O.A)(e).map(t=>{var e,a;return Object.assign({children:null!==(a=null===(e=null===t||void 0===t?void 0:t.props)||void 0===e?void 0:e.children)&&void 0!==a?a:""},t.props)})};var z=function(t,e){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(a[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(a[o[r]]=t[o[r]])}return a};const C=t=>{const{getPrefixCls:e,direction:a,timeline:r}=o.useContext(h.QO),{prefixCls:n,children:i,items:c,className:l,style:s}=t,d=z(t,["prefixCls","children","items","className","style"]),u=e("timeline",n);const g=(0,p.A)(u),[y,f,b]=v(u,g),S=k(c,i);return y(o.createElement(j,Object.assign({},d,{className:m()(null===r||void 0===r?void 0:r.className,l,b,g),style:Object.assign(Object.assign({},null===r||void 0===r?void 0:r.style),s),prefixCls:u,direction:a,items:S,hashId:f})))};C.Item=S;const I=C;var E=a(2635),B=a(6959),N=a(8168);const P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};var _=a(2172),H=function(t,e){return o.createElement(_.A,(0,N.A)({},t,{ref:e,icon:P}))};const q=o.forwardRef(H);var W=a(52),T=a(579);const L=()=>{const[t,e]=(0,o.useState)(!0),[a,d]=(0,o.useState)(null),[m,h]=(0,o.useState)([]),[p,u]=(0,o.useState)([]);(0,o.useEffect)(()=>{g()},[]);const g=async()=>{try{e(!0);const[t,a]=await Promise.all([W.Q.getStatistics(),W.Q.getOrders({status:"\ub300\uae30\uc911"})]);d(t),h(a.results.slice(0,5));const o=y();u(o)}catch(t){console.error("\ub300\uc2dc\ubcf4\ub4dc \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",t)}finally{e(!1)}},y=()=>[],f=[{title:"\ubc88\ud638",dataIndex:"no",key:"no",width:80},{title:"\uace0\uac1d\uba85",dataIndex:"sName",key:"sName"},{title:"\uc9c0\uc5ed",dataIndex:"sArea",key:"sArea"},{title:"\uc0c1\ud0dc",dataIndex:"recent_status",key:"recent_status",render:t=>(0,T.jsx)(r.A,{color:"processing",children:t})}];return(0,T.jsxs)("div",{style:{padding:24},children:[(0,T.jsx)("h1",{style:{marginBottom:24},children:"\ub300\uc2dc\ubcf4\ub4dc"}),(0,T.jsx)(n.A,{gutter:[16,16],style:{marginBottom:24},children:p.map((e,a)=>(0,T.jsx)(i.A,{xs:24,sm:12,lg:6,children:(0,T.jsx)(c.A,{loading:t,children:(0,T.jsx)(l.A,{title:e.title,value:e.value,prefix:e.icon,valueStyle:{color:e.color},suffix:e.trend&&(0,T.jsxs)("span",{style:{fontSize:14,color:e.trend.isUp?"#52c41a":"#f5222d"},children:[e.trend.isUp?(0,T.jsx)(B.A,{}):(0,T.jsx)(q,{}),Math.abs(e.trend.value),"%"]})})})},a))}),(0,T.jsxs)(n.A,{gutter:[16,16],children:[(0,T.jsx)(i.A,{xs:24,lg:8,children:(0,T.jsx)(c.A,{title:"\ucc98\ub9ac \ud604\ud669",loading:t,children:(0,T.jsxs)("div",{style:{padding:"20px 0"},children:[(0,T.jsx)(s.A,{type:"dashboard",percent:(null===a||void 0===a?void 0:a.conversionRate)||0,format:t=>"".concat(t,"%")}),(0,T.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[(0,T.jsx)("div",{children:"\uc804\ud658\uc728"}),(0,T.jsx)("small",{style:{color:"#999"},children:"\uc758\ub8b0 \u2192 \uacc4\uc57d"})]})]})})}),(0,T.jsx)(i.A,{xs:24,lg:8,children:(0,T.jsx)(c.A,{title:"\ucd5c\uadfc \ud65c\ub3d9",loading:t,children:(0,T.jsx)(I,{children:m.slice(0,4).map(t=>{const e=t.time?new Date(t.time):new Date,a=Date.now()-e.getTime(),o=Math.floor(a/6e4),r=Math.floor(o/60);let n="";return n=o<60?"".concat(o,"\ubd84 \uc804"):r<24?"".concat(r,"\uc2dc\uac04 \uc804"):e.toLocaleDateString("ko-KR"),{time:n,content:"\uc758\ub8b0 #".concat(t.no," - ").concat(t.sName||"\uace0\uac1d"," (").concat(t.recent_status,")"),color:{"\ub300\uae30\uc911":"blue","\ud560\ub2f9":"green","\uacc4\uc57d":"green","\ucde8\uc18c":"red","\ubc18\ub824":"orange"}[t.recent_status]||"gray"}}).map((t,e)=>(0,T.jsxs)(I.Item,{color:t.color,children:[(0,T.jsx)("p",{children:t.content}),(0,T.jsx)("small",{style:{color:"#999"},children:t.time})]},e))})})}),(0,T.jsx)(i.A,{xs:24,lg:8,children:(0,T.jsx)(c.A,{title:"\ucd5c\uadfc \uc758\ub8b0",loading:t,children:(0,T.jsx)(E.A,{dataSource:m,columns:f,pagination:!1,size:"small",rowKey:"no"})})})]})]})}},6959:(t,e,a)=>{a.d(e,{A:()=>l});var o=a(8168),r=a(5043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};var i=a(2172),c=function(t,e){return r.createElement(i.A,(0,o.A)({},t,{ref:e,icon:n}))};const l=r.forwardRef(c)}}]);
//# sourceMappingURL=879.9a1340e8.chunk.js.map